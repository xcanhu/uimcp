# ScreenCoder MCP 工具 - 简化版

这是一个专为AI助手设计的MCP工具，提供图像处理和分析功能，让AI助手能够更好地理解UI截图并生成相应的HTML代码。

## 设计理念

- **AI助手友好**: 工具只负责图像处理和分析，代码生成由AI助手完成
- **无需配置**: 不需要额外的API密钥或模型配置
- **专业分工**: 工具专注于计算机视觉任务，AI专注于代码生成

## 提供的工具

### 1. `analyze_ui_layout`
分析UI截图的布局结构，识别主要区域

**功能:**
- 使用OpenCV进行边缘检测和轮廓分析
- 识别潜在的布局区域
- 提供区域坐标和尺寸信息
- 为AI助手提供结构化的分析数据

### 2. `extract_ui_components` 
从UI截图中提取并识别各种UI组件

**功能:**
- 检测按钮、输入框、图片等UI元素
- 分析组件的位置、尺寸和形状特征
- 根据长宽比推测组件类型
- 为AI助手提供组件清单

### 3. `generate_html_structure`
基于布局分析结果生成HTML结构框架

**功能:**
- 创建基础的HTML模板
- 为每个区域生成对应的div容器
- 添加基础的CSS定位
- 提供可交互的结构预览

### 4. `crop_image_regions`
根据坐标信息裁剪图片的特定区域

**功能:**
- 精确裁剪指定区域
- 保存裁剪后的图片文件
- 返回base64编码的图片数据
- 为AI助手提供区域级别的图片

## 使用流程

### 典型的AI助手工作流程:

1. **用户上传截图**: "请将这个网页截图转换为HTML代码"

2. **AI助手调用布局分析**: 
   ```
   analyze_ui_layout(image: base64_screenshot)
   ```

3. **AI助手分析返回结果并识别区域**:
   - 基于工具返回的潜在区域信息
   - 结合对原始图片的视觉理解
   - 确定header、navigation、sidebar、main content等区域

4. **AI助手调用图片裁剪**:
   ```
   crop_image_regions(image: base64_screenshot, regions: identified_regions)
   ```

5. **AI助手为每个裁剪区域生成代码**:
   - 分析每个区域的裁剪图片
   - 生成对应的HTML/CSS代码
   - 考虑响应式设计和最佳实践

6. **AI助手组装最终代码**:
   - 将各区域代码整合
   - 添加必要的样式和脚本
   - 生成完整的HTML文件

## 安装和使用

### 安装依赖
```bash
pip install opencv-python pillow numpy mcp beautifulsoup4
```

### MCP配置
```json
{
  "mcpServers": {
    "screencoder": {
      "command": "python",
      "args": ["mcp_server_simplified.py"],
      "env": {}
    }
  }
}
```

### 使用示例

用户只需要对AI助手说：
- "请分析这张截图的布局"
- "帮我将这个页面转换为HTML"
- "提取这张图片中的UI组件"

AI助手会自动调用相应的工具并完成任务。

## 优势

1. **简单**: 无需复杂配置，开箱即用
2. **专业**: 专注于图像处理，结果更准确
3. **灵活**: AI助手可以根据具体需求调整生成策略
4. **高效**: 避免了多次AI模型调用的延迟
5. **可靠**: 减少了API配置错误的可能性

## 技术特点

- 使用OpenCV进行专业的图像分析
- 提供结构化的数据输出
- 支持多种图像格式
- 自动处理临时文件管理
- 完整的错误处理机制

这个设计更符合MCP工具的理念：提供专业的功能模块，让AI助手来协调和使用这些功能。
